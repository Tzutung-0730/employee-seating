{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"employee-container\"\n};\nconst _hoisted_2 = {\n  class: \"employee-table\"\n};\nconst _hoisted_3 = [\"onUpdate:modelValue\"];\nconst _hoisted_4 = {\n  key: 1\n};\nconst _hoisted_5 = [\"onUpdate:modelValue\"];\nconst _hoisted_6 = {\n  key: 1\n};\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = [\"onClick\"];\nexport function render(_ctx, _cache) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[6] || (_cache[6] = _createElementVNode(\"h1\", null, \"員工資料管理\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.searchQuery = $event),\n    placeholder: \"搜尋員工...\",\n    class: \"search-input\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.searchQuery]]), _createElementVNode(\"button\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => _ctx.addEmployee && _ctx.addEmployee(...args)),\n    class: \"btn add-btn\"\n  }, \"新增員工\"), _createElementVNode(\"table\", _hoisted_2, [_cache[5] || (_cache[5] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"員編\"), _createElementVNode(\"th\", null, \"姓名\"), _createElementVNode(\"th\", null, \"Email\"), _createElementVNode(\"th\", null, \"操作\")])], -1 /* HOISTED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.filteredEmployees, employee => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: employee.empId\n    }, [_createElementVNode(\"td\", null, _toDisplayString(employee.empId), 1 /* TEXT */), _createElementVNode(\"td\", null, [_ctx.editingEmpId === employee.empId ? _withDirectives((_openBlock(), _createElementBlock(\"input\", {\n      key: 0,\n      \"onUpdate:modelValue\": $event => employee.name = $event\n    }, null, 8 /* PROPS */, _hoisted_3)), [[_vModelText, employee.name]]) : (_openBlock(), _createElementBlock(\"span\", _hoisted_4, _toDisplayString(employee.name), 1 /* TEXT */))]), _createElementVNode(\"td\", null, [_ctx.editingEmpId === employee.empId ? _withDirectives((_openBlock(), _createElementBlock(\"input\", {\n      key: 0,\n      \"onUpdate:modelValue\": $event => employee.email = $event\n    }, null, 8 /* PROPS */, _hoisted_5)), [[_vModelText, employee.email]]) : (_openBlock(), _createElementBlock(\"span\", _hoisted_6, _toDisplayString(employee.email), 1 /* TEXT */))]), _createElementVNode(\"td\", null, [_createElementVNode(\"button\", {\n      onClick: $event => _ctx.editEmployee(employee),\n      class: \"btn edit-btn\"\n    }, [...(_cache[2] || (_cache[2] = [_createElementVNode(\"i\", {\n      class: \"pi pi-pencil\"\n    }, null, -1 /* HOISTED */), _createTextVNode(\" 編輯 \")]))], 8 /* PROPS */, _hoisted_7), _createElementVNode(\"button\", {\n      onClick: $event => _ctx.deleteEmployee(employee),\n      class: \"btn delete-btn\"\n    }, [...(_cache[3] || (_cache[3] = [_createElementVNode(\"i\", {\n      class: \"pi pi-trash\"\n    }, null, -1 /* HOISTED */), _createTextVNode(\" 刪除 \")]))], 8 /* PROPS */, _hoisted_8), _ctx.editingEmpId === employee.empId ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 0,\n      onClick: $event => _ctx.submitEdit(employee),\n      class: \"btn submit-btn\"\n    }, [...(_cache[4] || (_cache[4] = [_createElementVNode(\"i\", {\n      class: \"pi pi-check\"\n    }, null, -1 /* HOISTED */), _createTextVNode(\" 提交 \")]))], 8 /* PROPS */, _hoisted_9)) : _createCommentVNode(\"v-if\", true)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","type","_cache","$event","_ctx","searchQuery","placeholder","onClick","args","addEmployee","_hoisted_2","_Fragment","_renderList","filteredEmployees","employee","empId","_toDisplayString","editingEmpId","name","_hoisted_3","_hoisted_4","email","_hoisted_5","_hoisted_6","editEmployee","_createTextVNode","_hoisted_7","deleteEmployee","_hoisted_8","submitEdit","_hoisted_9","_createCommentVNode"],"sources":["C:\\Users\\tzutung\\employee-seating\\employee-seating-frontend\\src\\views\\Employee\\Employee.vue"],"sourcesContent":["<template>\r\n  <div class=\"employee-container\">\r\n    <h1>員工資料管理</h1>\r\n    <input type=\"text\" v-model=\"searchQuery\" placeholder=\"搜尋員工...\" class=\"search-input\" />\r\n    <button @click=\"addEmployee\" class=\"btn add-btn\">新增員工</button>\r\n    <table class=\"employee-table\">\r\n      <thead>\r\n        <tr>\r\n          <th>員編</th>\r\n          <th>姓名</th>\r\n          <th>Email</th>\r\n          <th>操作</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"employee in filteredEmployees\" :key=\"employee.empId\">\r\n          <td>{{ employee.empId }}</td>\r\n          <td>\r\n            <input v-if=\"editingEmpId === employee.empId\" v-model=\"employee.name\" />\r\n            <span v-else>{{ employee.name }}</span>\r\n          </td>\r\n          <td>\r\n            <input v-if=\"editingEmpId === employee.empId\" v-model=\"employee.email\" />\r\n            <span v-else>{{ employee.email }}</span>\r\n          </td>\r\n          <td>\r\n            <button @click=\"editEmployee(employee)\" class=\"btn edit-btn\">\r\n              <i class=\"pi pi-pencil\"></i> 編輯\r\n            </button>\r\n            <button @click=\"deleteEmployee(employee)\" class=\"btn delete-btn\">\r\n              <i class=\"pi pi-trash\"></i> 刪除\r\n            </button>\r\n            <button v-if=\"editingEmpId === employee.empId\" @click=\"submitEdit(employee)\" class=\"btn submit-btn\">\r\n              <i class=\"pi pi-check\"></i> 提交\r\n            </button>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport './Employee.css';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      searchQuery: '',\r\n      employees: [],\r\n      editingEmpId: null,  // 用來追蹤目前正在編輯的員工\r\n    };\r\n  },\r\n  computed: {\r\n    filteredEmployees() {\r\n      return this.employees.filter(emp =>\r\n        emp.empId.includes(this.searchQuery) || emp.name.includes(this.searchQuery)\r\n      );\r\n    }\r\n  },\r\n  methods: {\r\n    async loadEmployees() {\r\n      try {\r\n        const response = await axios.get('http://localhost:8080/employees');\r\n        this.employees = response.data;\r\n      } catch (error) {\r\n        console.error(\"Error loading employees:\", error);\r\n      }\r\n    },\r\n\r\n    async addEmployee() {\r\n      try {\r\n        const newEmployee = { empId: '', name: '', email: '' };\r\n        const response = await axios.post('http://localhost:8080/employees', newEmployee);\r\n        this.employees.push(response.data);\r\n        alert(\"員工新增成功！\");\r\n      } catch (error) {\r\n        console.error(\"Error adding employee:\", error);\r\n        alert(\"新增員工失敗！\");\r\n      }\r\n    },\r\n\r\n    async deleteEmployee(employee) {\r\n      try {\r\n        await axios.delete(`http://localhost:8080/employees/${employee.empId}`);\r\n        this.employees = this.employees.filter(emp => emp.empId !== employee.empId);\r\n        alert(\"員工已刪除！\");\r\n      } catch (error) {\r\n        console.error(\"Error deleting employee:\", error);\r\n        alert(\"刪除員工失敗！\");\r\n      }\r\n    },\r\n\r\n    editEmployee(employee) {\r\n      this.editingEmpId = employee.empId;\r\n    },\r\n\r\n    submitEdit(employee) {\r\n      try {\r\n        await axios.put(`http://localhost:8080/employees/${employee.empId}`, employee);\r\n        this.editingEmpId = null;\r\n        alert(\"員工更新成功！\");\r\n      } catch (error) {\r\n        console.error(\"Error updating employee:\", error);\r\n        alert(\"更新員工失敗！\");\r\n      }\r\n    }\r\n  },\r\n\r\n  created() {\r\n    this.loadEmployees();\r\n  }\r\n};\r\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}